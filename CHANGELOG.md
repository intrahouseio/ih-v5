# development
- Обновление версии в системных индикаторах (процессах) после обновления плагина
- Выгрузка нескольких шаблонов в ihpack 

# 5.5.19 07-06-2021
- Режим Эксперт теперь устанавливается не для проекта, а для учетной записи
- Операции, доступные только для пользователей-экспертов: 
   - webconsole (дашборд);
   - Подключение внешних модулей (настройка текущего проекта)
- Восстановлен пункт меню "БД" в админке IntraHouse 
- Пункт меню "Аналитика" в админке IntraHouse - опционально
- При загрузке плагина проверяется версия. Устанавливаются плагины только 5 версии
- В bug-report добавлены данные о версии системы и проекта
- Добавлена кнопка Сохранить при редактировании/перезагрузке проектов
- В новый проект добавляются типы устройств, шаблоны, диалоги, изображения из демо проекта
  Чтобы эта опция работала, нужно установить систему через curl 
- Отдельное окно отладчика для плагина

# 5.5.18 01-06-2021
- Увеличен таймаут (ping-pong) для потока, запускающего сниппеты с 1 до 10 сек (Wirenboard не успевает на старте) 

# 5.5.16 01-06-2021
- Добавлен системный плагин webconsole. Теперь консоль встроена в админку
- Доработаны обработчики типа - циклически и по расписанию
- Добавлена функция устройства для присваивания значений нескольким свойствам одновременно: device.setValues({prop1:val1, prop2:val2,...})
- Исправлена ошибка загрузки/выгрузки пакетов, плагинов, проектов под Windows
- Исправлена ошибка перезагрузки сервера с первой страницы дашборда, внесенная в v5.5.15

# beta 5.5.15 28-05-2021
- Добавлена отдельная вкладка для обновления системы с авторизацией
- На первой странице дашборда кнопка обновления убрана

# beta 5.5.2 12-05-2021
- Выделили все обработчики событий, сценарии и сниппеты (все что может написать пользователь на Javascript) в отдельные потоки, для того, чтобы была возможность следить за их выполнением. Данный механизм позволяет изолировать сценарии, которые выполняются больше 1 секунды и мониторить производительность всех сценариев в общем.
- В системные индикаторы добавлены свойства по потреблению оперативной памяти основного процесса, DB агентов и плагинов для расширения возможностей диагностики системы. Теперь мы можем в таблице посмотреть сколько реально памяти потребляет вся система.
- В экземплярах представления шаблонов визуализации теперь добавилась возможность изменять параметры цвета, рамки и т.д. Для каждого установленного на контейнер или экран экземпляра в отдельности. Теперь вы можете создать общий шаблон визуализации и докручивать его внешний вид по месту установки.

# beta 5.3.0. 05-04-2021
- Журналы переведены на sqlite3
- Изменена структура данных для визуализации. Старые выгруженные ihpacket на текущей версии не работают.
- Исправлены ошибки

# beta 5.2.18. 23-03-2021
 - Отказ от использования TingoDB для журналирования.
   Журналы устройств, журналы событий, логи плагинов пишутся в БД sqlite. Агент sqlite установлен вместе с системой.  
   Для корректной работы требуется обновление dbagent-а. 
   В следующей версии обновление системных агентов будет выполняться в рамках обновления системы
 - Добавлен обработчик для формирования значения глобальной переменной при изменении триггеров (свойств устройств)
 - Изменения в визуальном редакторе, связанные с выделением и группировкой    

# beta 5.2.16. 16-03-2021
- Расширенный функционал таблиц в project manager.
- Сценарии устройств: запуск сценария по списку свойств и/или по глобальной переменной.
- Доступ к глобальным переменным из сценария устройства. В сценарий устройства передается как параметр global.
- При создании экземпляра устройства, атрибуты свойств переносится из типа.
- Текстовое представление значения свойства можно использовать в юзер интерфейсе.
- 
# beta 5.2.13. 10-03-2021
- Групповая привязка устройства к папке каналов. Удобный механизм для привязки однотипных устройств. например счетчиков эл. энергии с большим количеством однотипных параметров
- Срок хранения в правилах хранения данных. Если поддерживает dbagent, то для каждого свойство будет уникальное время хранения данных в БД.
- Форматирование значения свойства устройства для удобного представления информации пользователю. Например вместо значения 1 в журнале устройства будет отображаться Включено. Есть готовый набор представлений или же можно создать свой.
- Копирование стилей в экранах, контейнерах, диалогах. Помогает быстрее создавать визуальные представления. Механизм перенесен из версии cherry.

# beta 5.2.12. 05-03-2021
 - Выгрузка/загрузка устройств и каналов в csv, ускоряет создание каналов и устройств, а так же их привязку.
 - Оптимизация получения данных по http. Интерфейс стал более отзывчивым, особенно на большом количестсве устройств. 
 - Журналы устройств, журналы событий, логи плагинов, пользовательские таблицы перенесены в TingoDB (NoSql база данных).
 - Добавлены обработчики уровня устройства. Теперь сценарии в рамках одного устройства можно реализовать прямо в типе устройства.
 - Механизм добавления внешних модулей npm в проект. Это позволит очень быстро расширять функционал системы с помощью готовых пакетов.
 - RESTApi появилась возможность создать свой REST HTTP API для системы, именно такой какой нужен вам для вашей задачи.
 
# beta 5.2.3. 15-01-2021
 - Исправлена загрузка изображений из zip через Import - багрепорт от @gis
 - Исправлена ошибка при округлении значений с десятичной точкой - багрепорт от @Anatol, @zahar69
 - Исправлена ошибка: После перезагрузки сервера данные неопределены - багрепорт в Telegram
 - Исправлена ошибка при копировании загруженного контейнера с изображениями внутри 
 - Изменена работа с журналом устройства
 - Доработаны компоненты диалога

# beta 5.2.0. 04-01-2021
 - Исправлена ошибка обновления системы
 - Исправлена ошибка актуаторов MegaD. 
   Требуется повторная загрузка плагина MegaD версия 5.0.1 https://github.com/intrahouseio/intraHouse.plugin-MegaD/archive/v5.0.1.zip

# beta 5.1.9 - 5.1.10 04-01-2021
- Ввод значения свойства в таблице PM
- Добавлены методы работы с таймерами устройств
- Исправлена работа с расширениями плагина (megad)
- Добавлен механизм адаптера плагина

# beta 5.1.5 - 5.1.8
- Перенос проектов Cherry
- Установка и инсталляция плагинов 
- Перезапуск плагина при изменении каналов (флаг restartOnChannelChange - mqttclient)

# beta 5.1.0. 09-12-2020
 - Механизм upgrade для проектов при изменении минорной версии. Переход на версионность в рамках v5
 
   Функция преобразования проектов, связанная с введением механизма фреймов (up_0_1)
   
 - Фрейм как механизм динамического переключения контейнера
 - Переключение контейнера по команде Goto Layout - выбор экрана, целевого фрейма и контейнера
   Этот функционал для UI на текущий момент работает в пределах экрана 
 - Настройка команды Goto Layout для переключения содержимого сразу нескольких фреймов экрана
   Этот функционал для UI на текущий момент НЕ работает (выполняется только первое переключение в пределах экрана)
   
 - Формирование popup для элемента дерева динамически в зависимости от узла
 
   Popup меню в дереве плагинов с использованием этого механизма: 
   - старт-стоп плагина
   - добавление/удаление экземпляров
   - активация установленных плагинов
   - загрузка из zip архива (реализовано частично)
   
 - Вывод логов: лог dbagent-а, лог системы (на dashboard)
   

# beta 0.0.8 - 0.0.12
 - Добавлены элементы ввода Input, Slider, Checkbox для размещения на экран, в контейнер и диалог
 - Добавлена возможность размещения графиков в окне диалога
 - Вывод графика свойства одного устройства на экран (диалог) без предварительного создания сущности График  
 - Работа по подписке (динамическое изменение) элементов диалога - отображаемых значений, графика, журнала
   !! В элементах ввода значение динамически не меняется, берется в момент формирования диалога 
 - Контекст диалога - возможность создания диалога для абстрактного устройства (Любое устройств)
   Привязка к конкретному устройству выполняется при использовании диалога
   
 - Добавлен механизм работы с исторической БД через dbagent-ы
   Возможность подключения различных БД. На текущий момент реализован dbagent для InfluxD
 - При периодическом сохранении в БД реализованы методы Min,Max,Minmax,Mean(среднее),First,Last
   Если метод не выбран, используется Last
 - Для устройства добавлена вкладка Записи в БД за час 
 
 - Добавлен механизм сниппетов как источника данных для глобальной переменной или устройства (возможно получение значений нескольких свойств)
 - Изменен механизм записи в журнал устройства: по умолчанию записываются команды, алерты (пока не реализовано) и ошибки
   Для записи изменения значений свойства нужно установить флаг Запись в журнал
 - Флаг Запись в журнал добавлен также для глобальной переменной
 

# beta 0.0.7
- Добавлен подсчет тэгов Scada (привязанных каналов)
- Узлы дерева Ресурсы перенесены в Визуализацию (Изображения, Шаблоны, Диалоги) и в Устройства (Типы устройств)
- Добавлены графики

# beta 0.0.6 03-11-2020
- Добавлен механизм on-line справки
- Добавлена возможность загружать изображения из zip-файла
- Добавлена возможность выгружать изображения из папки, включая вложенные папки
- Добавлен экспорт диалога (пакет)
